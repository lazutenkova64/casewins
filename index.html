<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CaseWins - Открывай кейсы CS2</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Общие стили */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        :root {
            --primary-color: #ff4655;
            --primary-dark: #d93a48;
            --secondary-color: #1e2328;
            --accent-color: #0f1923;
            --light-color: #ece8e1;
            --dark-color: #111;
            --success-color: #4caf50;
            --gold-color: #ffd700;
            --blue-color: #4a90e2;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --glass-bg: rgba(30, 35, 40, 0.7);
            --glass-border: rgba(255, 255, 255, 0.1);
        }

        body {
            background: linear-gradient(135deg, var(--accent-color) 0%, var(--secondary-color) 100%);
            color: var(--light-color);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Шапка */
        header {
            background: linear-gradient(180deg, rgba(15, 25, 35, 0.95) 0%, rgba(15, 25, 35, 0.85) 100%);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--glass-border);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 24px;
            font-weight: 800;
            color: var(--light-color);
            text-transform: uppercase;
        }

        .logo i {
            color: var(--primary-color);
            font-size: 28px;
        }

        .logo span {
            color: var(--primary-color);
            background: linear-gradient(45deg, var(--primary-color), #ff6b7a);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 30px;
        }

        nav a {
            color: var(--light-color);
            text-decoration: none;
            font-weight: 600;
            font-size: 16px;
            transition: var(--transition);
            padding: 8px 16px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        nav a:hover, nav a.active {
            background: linear-gradient(45deg, var(--primary-color), #ff6b7a);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 70, 85, 0.3);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
            position: relative;
        }

        .balance {
            background: var(--glass-bg);
            padding: 10px 20px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            border: 1px solid var(--glass-border);
            backdrop-filter: blur(5px);
        }

        .balance i {
            color: var(--gold-color);
        }

        .user-avatar {
            width: 45px;
            height: 45px;
            border-radius: 12px;
            overflow: hidden;
            border: 2px solid var(--primary-color);
            cursor: pointer;
            transition: var(--transition);
            background: var(--glass-bg);
        }

        .user-avatar:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(255, 70, 85, 0.5);
        }

        .user-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Кнопка админ-панели (скрыта по умолчанию) */
        .admin-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: linear-gradient(45deg, var(--primary-color), #ff6b7a);
            color: white;
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 12px;
            display: none;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 1000;
            transition: var(--transition);
            font-size: 18px;
            backdrop-filter: blur(5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .admin-btn:hover {
            transform: scale(1.1) rotate(90deg);
            box-shadow: 0 8px 20px rgba(255, 70, 85, 0.4);
        }

        .admin-btn.visible {
            display: flex;
        }

        /* Основной контент */
        main {
            padding: 40px 0 80px;
            display: flex;
            gap: 30px;
        }

        .page-title {
            font-size: 48px;
            margin-bottom: 40px;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            background: linear-gradient(45deg, var(--light-color), var(--primary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Боковая панель с историей выпадений */
        .drops-sidebar {
            width: 320px;
            background: var(--glass-bg);
            border-radius: 20px;
            padding: 25px;
            height: fit-content;
            border: 1px solid var(--glass-border);
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }

        .drops-title {
            font-size: 22px;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--primary-color);
            font-weight: 700;
        }

        .drops-title i {
            font-size: 24px;
        }

        .drops-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
            height: 600px;
            overflow: hidden;
            position: relative;
        }

        .drops-container {
            position: relative;
            height: 100%;
        }

        .drop-item {
            display: flex;
            align-items: center;
            gap: 15px;
            background: rgba(15, 25, 35, 0.6);
            padding: 15px;
            border-radius: 12px;
            border-left: 4px solid;
            animation: slideDown 20s linear infinite;
            margin-bottom: 15px;
            opacity: 0;
            position: absolute;
            width: 100%;
            transition: var(--transition);
        }

        @keyframes slideDown {
            0% {
                transform: translateY(-100px);
                opacity: 0;
            }
            5% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(600px);
                opacity: 0;
            }
        }

        .drop-avatar {
            width: 45px;
            height: 45px;
            border-radius: 10px;
            overflow: hidden;
            flex-shrink: 0;
        }

        .drop-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .drop-info {
            flex: 1;
            min-width: 0;
        }

        .drop-user {
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .drop-user span {
            color: rgba(255, 255, 255, 0.6);
            font-size: 12px;
        }

        .drop-item-name {
            font-size: 13px;
            color: var(--gold-color);
            font-weight: 600;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .drop-value {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* Основная секция с кейсами */
        .main-content {
            flex: 1;
        }

        /* Секция выбора кейсов */
        .case-selection {
            margin-bottom: 50px;
        }

        .section-title {
            font-size: 28px;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 15px;
            color: var(--light-color);
            font-weight: 700;
        }

        .section-title i {
            color: var(--primary-color);
            font-size: 32px;
        }

        .cases-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 30px;
        }

        .case-card {
            background: linear-gradient(145deg, rgba(30, 35, 40, 0.9), rgba(15, 25, 35, 0.9));
            border-radius: 20px;
            overflow: hidden;
            transition: var(--transition);
            border: 1px solid var(--glass-border);
            cursor: pointer;
            position: relative;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }

        .case-card:hover {
            transform: translateY(-10px);
            border-color: var(--primary-color);
            box-shadow: 0 15px 30px rgba(255, 70, 85, 0.2);
        }

        .case-card.active {
            border-color: var(--primary-color);
            box-shadow: 0 0 25px rgba(255, 70, 85, 0.5);
        }

        .case-image {
            height: 200px;
            background: linear-gradient(135deg, #0f1923 0%, #1e2328 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .case-image::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent, rgba(255, 70, 85, 0.1), transparent);
            transform: translateX(-100%);
            animation: shine 3s infinite;
        }

        @keyframes shine {
            100% {
                transform: translateX(100%);
            }
        }

        .case-image img {
            max-width: 70%;
            max-height: 70%;
            object-fit: contain;
            filter: drop-shadow(0 0 20px rgba(255, 255, 255, 0.1));
            transition: var(--transition);
        }

        .case-card:hover .case-image img {
            transform: scale(1.05);
        }

        .case-info {
            padding: 25px;
            position: relative;
        }

        .case-name {
            font-size: 22px;
            font-weight: 800;
            margin-bottom: 15px;
            color: var(--light-color);
        }

        .case-price {
            color: var(--gold-color);
            font-weight: 800;
            font-size: 20px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .case-price i {
            color: var(--gold-color);
            font-size: 22px;
        }

        .case-items {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 25px;
            background: rgba(0, 0, 0, 0.2);
            padding: 12px 15px;
            border-radius: 10px;
        }

        .open-case-section {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .open-case-btn {
            background: linear-gradient(45deg, var(--primary-color), var(--primary-dark));
            color: white;
            border: none;
            width: 100%;
            padding: 16px;
            font-weight: 700;
            border-radius: 12px;
            cursor: pointer;
            transition: var(--transition);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .open-case-btn:hover {
            background: linear-gradient(45deg, var(--primary-dark), var(--primary-color));
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 70, 85, 0.4);
        }

        .open-case-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
            background: linear-gradient(45deg, #666, #888);
        }

        .case-stats {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .stat {
            background: rgba(0, 0, 0, 0.3);
            padding: 8px 15px;
            border-radius: 8px;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
        }

        /* Секция открытия кейса */
        .case-opening-section {
            background: linear-gradient(135deg, rgba(15, 25, 35, 0.9), rgba(30, 35, 40, 0.9));
            border-radius: 25px;
            padding: 40px;
            margin-bottom: 50px;
            display: none;
            flex-direction: column;
            align-items: center;
            border: 1px solid var(--glass-border);
            backdrop-filter: blur(10px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        }

        .case-opening-section.active {
            display: flex;
        }

        .opening-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            margin-bottom: 40px;
        }

        .opening-title {
            font-size: 32px;
            font-weight: 800;
            color: var(--light-color);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .opening-title i {
            color: var(--primary-color);
        }

        .close-opening {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--glass-border);
            color: var(--light-color);
            width: 50px;
            height: 50px;
            border-radius: 12px;
            cursor: pointer;
            transition: var(--transition);
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-opening:hover {
            background: var(--primary-color);
            transform: rotate(90deg);
        }

        .case-opening-container {
            width: 100%;
            overflow: hidden;
            position: relative;
            margin-bottom: 40px;
            height: 280px;
            border-radius: 20px;
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.4), rgba(15, 25, 35, 0.6));
            border: 2px solid var(--glass-border);
        }

        .case-items-scroll {
            display: flex;
            gap: 0;
            padding: 30px 0;
            transition: transform 0.1s linear;
            width: max-content;
            height: 100%;
        }

        .scroll-item {
            width: 220px;
            height: 240px;
            background: rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            border-left: 1px solid rgba(255, 255, 255, 0.05);
            border-right: 1px solid rgba(255, 255, 255, 0.05);
            transition: var(--transition);
            flex-shrink: 0;
            position: relative;
        }

        .scroll-item.active {
            background: linear-gradient(135deg, rgba(255, 70, 85, 0.15), rgba(255, 107, 122, 0.1));
            transform: scale(1.08);
            box-shadow: 0 0 30px rgba(255, 70, 85, 0.6);
            z-index: 2;
            border-color: var(--primary-color);
        }

        .scroll-item img {
            width: 160px;
            height: 120px;
            object-fit: contain;
            margin-bottom: 15px;
            filter: drop-shadow(0 5px 15px rgba(0, 0, 0, 0.5));
            transition: var(--transition);
        }

        .scroll-item.active img {
            filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.5));
        }

        .scroll-item-name {
            font-size: 14px;
            text-align: center;
            font-weight: 600;
            margin-bottom: 10px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--light-color);
        }

        .scroll-item-price {
            color: var(--gold-color);
            font-weight: 700;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .case-opening-controls {
            display: flex;
            gap: 30px;
            align-items: center;
            width: 100%;
            justify-content: center;
        }

        .spin-btn {
            background: linear-gradient(45deg, var(--primary-color), var(--primary-dark));
            color: white;
            border: none;
            padding: 20px 60px;
            font-size: 20px;
            font-weight: 800;
            border-radius: 16px;
            cursor: pointer;
            transition: var(--transition);
            text-transform: uppercase;
            letter-spacing: 2px;
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: 0 10px 25px rgba(255, 70, 85, 0.3);
        }

        .spin-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(255, 70, 85, 0.4);
            background: linear-gradient(45deg, var(--primary-dark), var(--primary-color));
        }

        .spin-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
            background: linear-gradient(45deg, #666, #888);
        }

        .items-preview {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 20px;
            width: 100%;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 1px solid var(--glass-border);
        }

        .preview-item {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            transition: var(--transition);
            border: 1px solid transparent;
        }

        .preview-item:hover {
            border-color: var(--glass-border);
            transform: translateY(-5px);
        }

        .preview-item img {
            width: 100px;
            height: 75px;
            object-fit: contain;
            filter: drop-shadow(0 3px 10px rgba(0, 0, 0, 0.3));
        }

        .preview-name {
            font-size: 12px;
            text-align: center;
            font-weight: 600;
            color: var(--light-color);
        }

        .preview-price {
            color: var(--gold-color);
            font-size: 14px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* Модальные окна */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: linear-gradient(135deg, rgba(30, 35, 40, 0.95), rgba(15, 25, 35, 0.95));
            width: 90%;
            max-width: 900px;
            border-radius: 25px;
            overflow: hidden;
            border: 1px solid var(--glass-border);
            animation: modalAppear 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(20px);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4);
        }

        @keyframes modalAppear {
            from { 
                transform: scale(0.8) translateY(20px);
                opacity: 0; 
            }
            to { 
                transform: scale(1) translateY(0);
                opacity: 1; 
            }
        }

        .modal-header {
            background: linear-gradient(90deg, var(--primary-color), var(--primary-dark));
            padding: 25px;
            text-align: center;
            font-size: 32px;
            font-weight: 800;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .close-modal-btn {
            background: rgba(0, 0, 0, 0.3);
            border: none;
            color: white;
            width: 45px;
            height: 45px;
            border-radius: 12px;
            cursor: pointer;
            transition: var(--transition);
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-modal-btn:hover {
            background: rgba(0, 0, 0, 0.5);
            transform: rotate(90deg);
        }

        .modal-body {
            padding: 40px;
        }

        .won-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 25px;
            margin: 40px 0;
        }

        .item-image {
            width: 280px;
            height: 210px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: radial-gradient(circle at center, rgba(255, 70, 85, 0.1) 0%, transparent 70%);
            border-radius: 20px;
            padding: 25px;
            border: 2px solid var(--glass-border);
            position: relative;
            overflow: hidden;
        }

        .item-image::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            right: -50%;
            bottom: -50%;
            background: linear-gradient(45deg, transparent, rgba(255, 215, 0, 0.1), transparent);
            transform: rotate(45deg);
            animation: shineEffect 3s infinite;
        }

        @keyframes shineEffect {
            0% { transform: translateX(-100%) rotate(45deg); }
            100% { transform: translateX(100%) rotate(45deg); }
        }

        .item-image img {
            max-width: 100%;
            max-height: 100%;
            filter: drop-shadow(0 10px 30px rgba(0, 0, 0, 0.5));
            position: relative;
            z-index: 1;
        }

        .item-name {
            font-size: 32px;
            font-weight: 800;
            color: var(--gold-color);
            text-align: center;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .item-price {
            font-size: 24px;
            font-weight: 700;
            color: var(--light-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .item-rarity {
            padding: 8px 20px;
            border-radius: 25px;
            font-weight: 800;
            text-transform: uppercase;
            font-size: 14px;
            letter-spacing: 1px;
        }

        .rarity-common {
            background: linear-gradient(45deg, rgba(150, 150, 150, 0.2), rgba(100, 100, 100, 0.2));
            color: #969696;
            border: 1px solid #969696;
        }

        .rarity-uncommon {
            background: linear-gradient(45deg, rgba(77, 181, 58, 0.2), rgba(60, 140, 45, 0.2));
            color: #4db53a;
            border: 1px solid #4db53a;
        }

        .rarity-rare {
            background: linear-gradient(45deg, rgba(76, 110, 244, 0.2), rgba(60, 90, 200, 0.2));
            color: #4c6ef4;
            border: 1px solid #4c6ef4;
        }

        .rarity-mythical {
            background: linear-gradient(45deg, rgba(182, 80, 155, 0.2), rgba(150, 60, 120, 0.2));
            color: #b6509b;
            border: 1px solid #b6509b;
        }

        .rarity-legendary {
            background: linear-gradient(45deg, rgba(255, 215, 0, 0.2), rgba(200, 170, 0, 0.2));
            color: var(--gold-color);
            border: 1px solid var(--gold-color);
        }

        .rarity-ancient {
            background: linear-gradient(45deg, rgba(235, 75, 75, 0.2), rgba(200, 50, 50, 0.2));
            color: #eb4b4b;
            border: 1px solid #eb4b4b;
        }

        .modal-actions {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin-top: 40px;
        }

        .modal-btn {
            padding: 16px 40px;
            border: none;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .close-modal {
            background: linear-gradient(45deg, #2a2f36, #3a3f46);
            color: white;
        }

        .close-modal:hover {
            background: linear-gradient(45deg, #3a3f46, #4a4f56);
            transform: translateY(-2px);
        }

        .open-again {
            background: linear-gradient(45deg, var(--primary-color), var(--primary-dark));
            color: white;
        }

        .open-again:hover {
            background: linear-gradient(45deg, var(--primary-dark), var(--primary-color));
            transform: translateY(-2px);
        }

        /* Админ панель */
        .admin-panel {
            background: linear-gradient(135deg, rgba(30, 35, 40, 0.95), rgba(15, 25, 35, 0.95));
            width: 90%;
            max-width: 500px;
            border-radius: 25px;
            overflow: hidden;
            border: 1px solid var(--glass-border);
        }

        .admin-form {
            padding: 40px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--light-color);
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 15px 20px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            color: white;
            font-size: 16px;
            transition: var(--transition);
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(255, 70, 85, 0.2);
        }

        .admin-actions {
            display: flex;
            gap: 20px;
            margin-top: 40px;
        }

        .admin-btn-submit {
            background: linear-gradient(45deg, var(--primary-color), var(--primary-dark));
            color: white;
            border: none;
            padding: 16px 30px;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            flex: 1;
            transition: var(--transition);
        }

        .admin-btn-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 70, 85, 0.3);
        }

        .admin-btn-cancel {
            background: linear-gradient(45deg, #2a2f36, #3a3f46);
            color: white;
            border: none;
            padding: 16px 30px;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            flex: 1;
            transition: var(--transition);
        }

        .admin-btn-cancel:hover {
            background: linear-gradient(45deg, #3a3f46, #4a4f56);
            transform: translateY(-2px);
        }

        /* Окно авторизации */
        .auth-modal {
            background: linear-gradient(135deg, rgba(30, 35, 40, 0.95), rgba(15, 25, 35, 0.95));
            width: 90%;
            max-width: 450px;
            border-radius: 25px;
            overflow: hidden;
            border: 1px solid var(--glass-border);
        }

        .auth-tabs {
            display: flex;
            background: rgba(0, 0, 0, 0.2);
            border-bottom: 1px solid var(--glass-border);
        }

        .auth-tab {
            flex: 1;
            padding: 20px;
            text-align: center;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            color: rgba(255, 255, 255, 0.7);
        }

        .auth-tab.active {
            background: linear-gradient(45deg, var(--primary-color), var(--primary-dark));
            color: white;
        }

        .auth-form {
            padding: 40px;
        }

        .auth-form h3 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 24px;
            color: var(--light-color);
        }

        .auth-error {
            background: rgba(255, 70, 85, 0.2);
            border: 1px solid var(--primary-color);
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 25px;
            text-align: center;
            display: none;
            color: white;
        }

        .auth-error.active {
            display: block;
        }

        /* Профиль пользователя */
        .profile-modal {
            background: linear-gradient(135deg, rgba(30, 35, 40, 0.95), rgba(15, 25, 35, 0.95));
            width: 90%;
            max-width: 500px;
            border-radius: 25px;
            overflow: hidden;
            border: 1px solid var(--glass-border);
        }

        .profile-header {
            background: linear-gradient(90deg, var(--primary-color), var(--primary-dark));
            padding: 30px;
            text-align: center;
            position: relative;
        }

        .profile-avatar {
            width: 120px;
            height: 120px;
            border-radius: 20px;
            overflow: hidden;
            border: 3px solid white;
            margin: 0 auto 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        .profile-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .profile-name {
            font-size: 28px;
            font-weight: 800;
            color: white;
        }

        .profile-body {
            padding: 40px;
        }

        .profile-info {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .profile-stat {
            display: flex;
            justify-content: space-between;
            padding: 18px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 12px;
            border: 1px solid var(--glass-border);
            transition: var(--transition);
        }

        .profile-stat:hover {
            border-color: var(--primary-color);
            transform: translateX(5px);
        }

        .profile-stat span:first-child {
            font-weight: 600;
            color: var(--light-color);
        }

        .profile-stat-value {
            color: var(--gold-color);
            font-weight: 700;
        }

        .logout-btn {
            background: linear-gradient(45deg, #2a2f36, #3a3f46);
            color: white;
            border: none;
            padding: 16px;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            width: 100%;
            margin-top: 30px;
            transition: var(--transition);
        }

        .logout-btn:hover {
            background: linear-gradient(45deg, var(--primary-color), var(--primary-dark));
            transform: translateY(-2px);
        }

        /* Чат поддержки */
        .support-chat {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 400px;
            height: 500px;
            background: linear-gradient(135deg, rgba(30, 35, 40, 0.95), rgba(15, 25, 35, 0.95));
            border-radius: 20px;
            border: 1px solid var(--glass-border);
            backdrop-filter: blur(20px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
            display: none;
            flex-direction: column;
            z-index: 999;
            overflow: hidden;
        }

        .support-chat.active {
            display: flex;
        }

        .chat-header {
            background: linear-gradient(90deg, var(--primary-color), var(--primary-dark));
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-header h3 {
            font-size: 18px;
            font-weight: 700;
            color: white;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .chat-close {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            transition: var(--transition);
        }

        .chat-close:hover {
            transform: rotate(90deg);
        }

        .chat-body {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .chat-message {
            max-width: 80%;
            padding: 15px;
            border-radius: 15px;
            font-size: 14px;
            line-height: 1.4;
        }

        .chat-message.support {
            background: rgba(76, 110, 244, 0.2);
            border: 1px solid rgba(76, 110, 244, 0.3);
            align-self: flex-start;
        }

        .chat-message.user {
            background: rgba(255, 70, 85, 0.2);
            border: 1px solid rgba(255, 70, 85, 0.3);
            align-self: flex-end;
        }

        .chat-input {
            padding: 20px;
            border-top: 1px solid var(--glass-border);
            background: rgba(0, 0, 0, 0.2);
        }

        .chat-input input {
            width: 100%;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            color: white;
            font-size: 14px;
            margin-bottom: 15px;
        }

        .chat-input input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .chat-input button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(45deg, var(--primary-color), var(--primary-dark));
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
        }

        .chat-input button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 70, 85, 0.3);
        }

        /* Футер */
        footer {
            background: linear-gradient(180deg, transparent, rgba(15, 25, 35, 0.9));
            padding: 40px 0;
            border-top: 1px solid var(--glass-border);
            margin-top: 60px;
        }

        .footer-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 25px;
        }

        .footer-logo {
            font-size: 24px;
            font-weight: 800;
            color: var(--light-color);
            text-transform: uppercase;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .footer-logo span {
            color: var(--primary-color);
            background: linear-gradient(45deg, var(--primary-color), #ff6b7a);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .footer-links {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .footer-links a {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            transition: var(--transition);
            padding: 8px 16px;
            border-radius: 8px;
        }

        .footer-links a:hover {
            color: var(--primary-color);
            background: rgba(255, 70, 85, 0.1);
        }

        .copyright {
            color: rgba(255, 255, 255, 0.5);
            font-size: 14px;
            text-align: center;
            max-width: 600px;
        }

        /* Адаптивность */
        @media (max-width: 1200px) {
            main {
                flex-direction: column;
            }
            
            .drops-sidebar {
                width: 100%;
                order: 2;
            }
            
            .drops-list {
                height: 250px;
                flex-direction: row;
                overflow-x: auto;
            }
            
            .drop-item {
                min-width: 280px;
                animation: none !important;
                position: static !important;
                opacity: 1 !important;
                margin-bottom: 0;
            }
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 20px;
            }
            
            nav ul {
                gap: 10px;
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .page-title {
                font-size: 36px;
            }
            
            .cases-grid {
                grid-template-columns: 1fr;
            }
            
            .case-opening-section {
                padding: 25px;
            }
            
            .scroll-item {
                width: 180px;
                height: 200px;
            }
            
            .admin-btn {
                top: 15px;
                left: 15px;
            }
            
            .spin-btn {
                padding: 15px 30px;
                font-size: 16px;
            }
            
            .support-chat {
                width: calc(100% - 40px);
                right: 20px;
                bottom: 20px;
                height: 400px;
            }
        }

        @media (max-width: 480px) {
            .page-title {
                font-size: 28px;
            }
            
            .section-title {
                font-size: 22px;
            }
            
            .modal-content {
                width: 95%;
                padding: 15px;
            }
            
            .item-name {
                font-size: 24px;
            }
        }

        /* Утилиты */
        .gradient-text {
            background: linear-gradient(45deg, var(--primary-color), var(--gold-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .glass-effect {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .shake {
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
    </style>
</head>
<body>
    <!-- Кнопка админ-панели -->
    <button class="admin-btn" id="admin-btn" title="Админ панель">
        <i class="fas fa-cog"></i>
    </button>

    <!-- Шапка -->
    <header>
        <div class="container header-content">
            <div class="logo">
                <i class="fas fa-gem"></i>
                Case<span>Wins</span>
            </div>
            
            <nav>
                <ul>
                    <li><a href="#" class="active"><i class="fas fa-home"></i> Главная</a></li>
                    <li><a href="#" id="cases-tab"><i class="fas fa-box-open"></i> Кейсы</a></li>
                    <li><a href="#" id="help-tab"><i class="fas fa-question-circle"></i> Помощь</a></li>
                </ul>
            </nav>
            
            <div class="user-info">
                <div class="balance">
                    <i class="fas fa-coins"></i>
                    <span id="user-balance">0</span>
                </div>
                
                <div class="user-avatar" id="user-avatar-btn">
                    <img src="https://cdn-icons-png.flaticon.com/512/847/847969.png" alt="Аватар">
                </div>
            </div>
        </div>
    </header>

    <!-- Чат поддержки -->
    <div class="support-chat" id="support-chat">
        <div class="chat-header">
            <h3><i class="fas fa-headset"></i> Поддержка CaseWins</h3>
            <button class="chat-close" id="chat-close">&times;</button>
        </div>
        <div class="chat-body" id="chat-body">
            <div class="chat-message support">
                <strong>Поддержка:</strong> Здравствуйте! Чем могу помочь?
            </div>
            <div class="chat-message support">
                <strong>Поддержка:</strong> Опишите вашу проблему, и мы постараемся помочь в ближайшее время.
            </div>
        </div>
        <div class="chat-input">
            <input type="text" id="chat-username" placeholder="Ваш логин" value="Гость">
            <input type="text" id="chat-message" placeholder="Введите ваш вопрос...">
            <button id="chat-send">Отправить</button>
        </div>
    </div>

    <!-- Основной контент -->
    <main class="container">
        <!-- Боковая панель с историей выпадений -->
        <aside class="drops-sidebar">
            <h3 class="drops-title">
                <i class="fas fa-bolt"></i> Последние выпадения
            </h3>
            <div class="drops-list">
                <div class="drops-container" id="drops-container">
                    <!-- История выпадений будет добавляться динамически -->
                </div>
            </div>
        </aside>
        
        <!-- Основная секция -->
        <div class="main-content">
            <h1 class="page-title">Открой <span class="gradient-text">кейсы CS2</span> и выиграй <span class="gradient-text">скины</span></h1>
            
            <!-- Секция открытия кейса (скрыта по умолчанию) -->
            <section class="case-opening-section" id="case-opening-section">
                <div class="opening-header">
                    <div class="opening-title">
                        <i class="fas fa-box-open"></i>
                        <span id="opening-case-name">Кейс CS2 "Prisma"</span>
                    </div>
                    <button class="close-opening" id="close-opening">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="case-opening-container">
                    <div class="case-items-scroll" id="case-items-scroll">
                        <!-- Предметы будут добавляться динамически -->
                    </div>
                </div>
                
                <div class="case-opening-controls">
                    <button class="spin-btn" id="spin-btn">
                        <i class="fas fa-play"></i> Открыть за <span id="spin-price">2,500</span>
                    </button>
                </div>
                
                <div class="items-preview" id="items-preview">
                    <!-- Предметы из кейса будут отображаться здесь -->
                </div>
            </section>
            
            <!-- Секция выбора кейсов -->
            <section class="case-selection" id="case-selection">
                <h2 class="section-title">
                    <i class="fas fa-gem"></i> Доступные кейсы
                </h2>
                
                <div class="cases-grid">
                    <!-- Кейс 1 -->
                    <div class="case-card" data-case="1">
                        <div class="case-image">
                            <img src="https://community.cloudflare.steamstatic.com/economy/image/-9a81dlWLwJ2UUGcVs_nsVtzdOEdtWwKGZZLQHTxDZ7I56KU0Zwwo4NUX4oFJZEHLbXH5ApeO4YmlhxYQknCRvCo04DEVlxkKgpou-6kejhjxszFJTwW09-3lpSOm_7mJ4Tdl3lW7fp9i_vG8IXKhBqw8xU5aj_3ItOQegE2NA3Q-lO_xO--0cO6vJ6bz3sw7X5l-z-DyUPZFI9F-w/512fx512f" alt="Кейс Prisma">
                        </div>
                        <div class="case-info">
                            <div class="case-name">Кейс CS2 "Prisma"</div>
                            <div class="case-price">
                                <i class="fas fa-coins"></i> 
                                <span class="case-price-value">2,500</span>
                            </div>
                            <div class="case-items">
                                <span>24 предмета</span>
                                <span>Легендарка: 2%</span>
                            </div>
                            <div class="open-case-section">
                                <button class="open-case-btn" data-case="1" disabled>
                                    <i class="fas fa-lock"></i> Войдите для открытия
                                </button>
                                <div class="case-stats">
                                    <div class="stat"><i class="fas fa-box-open"></i> 24 предмета</div>
                                    <div class="stat"><i class="fas fa-crown"></i> 2% шанс</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Кейс 2 -->
                    <div class="case-card" data-case="2">
                        <div class="case-image">
                            <img src="https://community.cloudflare.steamstatic.com/economy/image/-9a81dlWLwJ2UUGcVs_nsVtzdOEdtWwKGZZLQHTxDZ7I56KU0Zwwo4NUX4oFJZEHLbXH5ApeO4YmlhxYQknCRvCo04DEVlxkKgpou-6kejhjxszFJTwW09C3l4-fnvD8J4Tdl3lW7cBOhujT8omj3gHg-0I5ZW_hJteLM1hpM1vR81e2xr-60cO6tJmcy3Rl63I3-z-DyUPZvU6sKQ/512fx512f" alt="Кейс Operation">
                        </div>
                        <div class="case-info">
                            <div class="case-name">Кейс CS2 "Operation"</div>
                            <div class="case-price">
                                <i class="fas fa-coins"></i> 
                                <span class="case-price-value">3,200</span>
                            </div>
                            <div class="case-items">
                                <span>18 предметов</span>
                                <span>Легендарка: 3%</span>
                            </div>
                            <div class="open-case-section">
                                <button class="open-case-btn" data-case="2" disabled>
                                    <i class="fas fa-lock"></i> Войдите для открытия
                                </button>
                                <div class="case-stats">
                                    <div class="stat"><i class="fas fa-box-open"></i> 18 предметов</div>
                                    <div class="stat"><i class="fas fa-crown"></i> 3% шанс</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>
    
    <!-- Модальное окно с результатом -->
    <div class="modal" id="result-modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="gradient-text">Поздравляем!</span>
                <button class="close-modal-btn" id="close-result-modal">&times;</button>
            </div>
            <div class="modal-body">
                <p style="text-align: center; font-size: 18px; margin-bottom: 20px;">Вы открыли кейс и получаете:</p>
                
                <div class="won-item">
                    <div class="item-image">
                        <img id="won-item-img" src="https://community.cloudflare.steamstatic.com/economy/image/-9a81dlWLwJ2UUGcVs_nsVtzdOEdtWwKGZZLQHTxDZ7I56KU0Zwwo4NUX4oFJZEHLbXH5ApeO4YmlhxYQknCRvCo04DEVlxkKgpou-6kejhzw8XYaQJH9d-zkYS0m_7zNq_ummpD7cBOhujT8omj3gHg-0I5ZW-hI9WccgM_Y1nS-QC5xr-6gJO6vJydz3sw7SJw-z-DyROfVxI-YfsXtw/360fx360f" alt="Выигранный предмет">
                    </div>
                    <div class="item-name" id="won-item-name">AK-47 | Красная линия</div>
                    <div class="item-price" id="won-item-price">Цена: 400 <i class="fas fa-coins"></i></div>
                    <div class="item-rarity rarity-rare" id="won-item-rarity">Редкий</div>
                </div>
                
                <div class="modal-actions">
                    <button class="modal-btn close-modal" id="close-modal-btn">
                        <i class="fas fa-times"></i> Закрыть
                    </button>
                    <button class="modal-btn open-again" id="open-again-btn">
                        <i class="fas fa-redo"></i> Открыть еще
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Админ-панель -->
    <div class="modal" id="admin-modal">
        <div class="admin-panel">
            <div class="modal-header">
                <span class="gradient-text">Админ панель</span>
                <button class="close-modal-btn" id="close-admin-modal">&times;</button>
            </div>
            <div class="admin-form">
                <div class="form-group">
                    <label for="admin-password">Пароль администратора</label>
                    <input type="password" id="admin-password" placeholder="Введите пароль">
                </div>
                
                <div id="admin-content" style="display: none;">
                    <h3 style="margin-bottom: 30px; text-align: center; color: var(--primary-color);">Настройки системы</h3>
                    
                    <div class="form-group">
                        <label for="admin-balance">Баланс пользователя</label>
                        <input type="number" id="admin-balance" value="12540">
                    </div>
                    
                    <div class="form-group">
                        <label for="admin-case1-price">Цена Кейса 1</label>
                        <input type="number" id="admin-case1-price" value="2500">
                    </div>
                    
                    <div class="form-group">
                        <label for="admin-case2-price">Цена Кейса 2</label>
                        <input type="number" id="admin-case2-price" value="3200">
                    </div>
                    
                    <div class="form-group">
                        <label for="admin-case1-chance">Шанс на легендарку для Кейса 1 (%)</label>
                        <input type="number" id="admin-case1-chance" min="0" max="100" value="2" step="0.1">
                    </div>
                    
                    <div class="form-group">
                        <label for="admin-case2-chance">Шанс на легендарку для Кейса 2 (%)</label>
                        <input type="number" id="admin-case2-chance" min="0" max="100" value="3" step="0.1">
                    </div>
                    
                    <div class="form-group">
                        <label for="admin-support-messages">Сообщения поддержки</label>
                        <textarea id="admin-support-messages" rows="5" placeholder="Новые сообщения появятся здесь..." readonly></textarea>
                    </div>
                    
                    <div class="admin-actions">
                        <button class="admin-btn-submit" id="admin-save-btn">
                            <i class="fas fa-save"></i> Сохранить
                        </button>
                        <button class="admin-btn-cancel" id="admin-cancel-btn">
                            <i class="fas fa-times"></i> Отмена
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Окно авторизации -->
    <div class="modal" id="auth-modal">
        <div class="auth-modal">
            <div class="auth-tabs">
                <div class="auth-tab active" id="login-tab">Вход</div>
                <div class="auth-tab" id="register-tab">Регистрация</div>
            </div>
            
            <!-- Форма входа -->
            <div class="auth-form" id="login-form">
                <h3>Вход в аккаунт</h3>
                <div class="auth-error" id="login-error">Неверный логин или пароль</div>
                
                <div class="form-group">
                    <label for="login-username">Логин</label>
                    <input type="text" id="login-username" placeholder="Введите логин">
                </div>
                
                <div class="form-group">
                    <label for="login-password">Пароль</label>
                    <input type="password" id="login-password" placeholder="Введите пароль">
                </div>
                
                <button class="admin-btn-submit" id="login-btn" style="width: 100%;">
                    <i class="fas fa-sign-in-alt"></i> Войти
                </button>
                
                <div style="text-align: center; margin-top: 20px; color: rgba(255,255,255,0.6);">
                    Или продолжайте как <a href="#" id="continue-guest" style="color: var(--primary-color);">Гость</a>
                </div>
            </div>
            
            <!-- Форма регистрации -->
            <div class="auth-form" id="register-form" style="display: none;">
                <h3>Регистрация аккаунта</h3>
                <div class="auth-error" id="register-error">Логин уже занят</div>
                
                <div class="form-group">
                    <label for="register-username">Логин</label>
                    <input type="text" id="register-username" placeholder="Придумайте логин (мин. 3 символа)">
                </div>
                
                <div class="form-group">
                    <label for="register-password">Пароль</label>
                    <input type="password" id="register-password" placeholder="Придумайте пароль (мин. 6 символов)">
                </div>
                
                <div class="form-group">
                    <label for="register-confirm">Подтвердите пароль</label>
                    <input type="password" id="register-confirm" placeholder="Повторите пароль">
                </div>
                
                <button class="admin-btn-submit" id="register-btn" style="width: 100%;">
                    <i class="fas fa-user-plus"></i> Зарегистрироваться
                </button>
                
                <div style="text-align: center; margin-top: 20px; color: rgba(255,255,255,0.6);">
                    Уже есть аккаунт? <a href="#" id="switch-to-login" style="color: var(--primary-color);">Войти</a>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Профиль пользователя -->
    <div class="modal" id="profile-modal">
        <div class="profile-modal">
            <div class="profile-header">
                <button class="close-modal-btn" id="close-profile-modal" style="position: absolute; right: 20px; top: 20px;">&times;</button>
                <div class="profile-avatar">
                    <img id="profile-avatar-img" src="https://cdn-icons-png.flaticon.com/512/847/847969.png" alt="Аватар">
                </div>
                <div class="profile-name" id="profile-name">Гость</div>
            </div>
            <div class="profile-body">
                <div class="profile-info">
                    <div class="profile-stat">
                        <span><i class="fas fa-coins"></i> Баланс:</span>
                        <span class="profile-stat-value" id="profile-balance">0</span>
                    </div>
                    <div class="profile-stat">
                        <span><i class="fas fa-box-open"></i> Открыто кейсов:</span>
                        <span class="profile-stat-value" id="profile-cases">0</span>
                    </div>
                    <div class="profile-stat">
                        <span><i class="fas fa-chart-line"></i> Общая стоимость:</span>
                        <span class="profile-stat-value" id="profile-total">0</span>
                    </div>
                    <div class="profile-stat">
                        <span><i class="fas fa-crown"></i> Лучший предмет:</span>
                        <span class="profile-stat-value" id="profile-best">Нет</span>
                    </div>
                    <div class="profile-stat">
                        <span><i class="fas fa-calendar"></i> Аккаунт создан:</span>
                        <span class="profile-stat-value" id="profile-created">-</span>
                    </div>
                </div>
                
                <button class="logout-btn" id="logout-btn">
                    <i class="fas fa-sign-out-alt"></i> Выйти из аккаунта
                </button>
            </div>
        </div>
    </div>
    
    <!-- Футер -->
    <footer>
        <div class="container footer-content">
            <div class="footer-logo">
                <i class="fas fa-gem"></i>
                Case<span>Wins</span>
            </div>
            
            <div class="footer-links">
                <a href="#"><i class="fas fa-file-contract"></i> Пользовательское соглашение</a>
                <a href="#"><i class="fas fa-shield-alt"></i> Политика конфиденциальности</a>
                <a href="#" id="footer-help"><i class="fas fa-question-circle"></i> Поддержка</a>
                <a href="#"><i class="fas fa-envelope"></i> Контакты</a>
            </div>
            
            <div class="copyright">
                © 2023 CaseWins. Все права защищены. Сайт предназначен для развлекательных целей.
                CS:GO и Counter-Strike: Global Offensive являются товарными знаками корпорации Valve.
            </div>
        </div>
    </footer>

    <script>
        // Системные настройки
        const systemSettings = {
            adminPassword: "1234",
            defaultBalance: 10000
        };

        // Данные о кейсах CS2 с реальными ссылками Steam
        const cs2Items = {
            // Обычные (common)
            common: [
                { name: "Glock-18 | Кость", value: 60, img: "https://community.cloudflare.steamstatic.com/economy/image/-9a81dlWLwJ2UUGcVs_nsVtzdOEdtWwKGZZLQHTxDZ7I56KU0Zwwo4NUX4oFJZEHLbXH5ApeO4YmlhxYQknCRvCo04DEVlxkKgpou-6kejh33PLFJQJD_9W7m4-0hPL5DLfQkm5u5Mx2gv2--Y3nj1H6_kBtYzv7J4WUcQY3Yg3S81e2xr-60cO6tJnBn3I2pHgq5SGd-z3ln1KSGQY9Pw/360fx360f" },
                { name: "USP-S | Кость", value: 70, img: "https://community.cloudflare.steamstatic.com/economy/image/-9a81dlWLwJ2UUGcVs_nsVtzdOEdtWwKGZZLQHTxDZ7I56KU0Zwwo4NUX4oFJZEHLbXH5ApeO4YmlhxYQknCRvCo04DEVlxkKgpou-6kejh33PLFJQJD_9W7m4-0hPL5DLfQkm5u5Mx2gv2--Y3nj1H6_kBtYzv7J4WUcQY3Yg3S81e2xr-60cO6tJnBn3I2pHgq5SGd-z3ln1KSGQY9Pw/360fx360f" },
                { name: "P250 | Песочная дюна", value: 50, img: "https://community.cloudflare.steamstatic.com/economy/image/-9a81dlWLwJ2UUGcVs_nsVtzdOEdtWwKGZZLQHTxDZ7I56KU0Zwwo4NUX4oFJZEHLbXH5ApeO4YmlhxYQknCRvCo04DEVlxkKgpou-6kejhz2v_Nfz5H_uOxh7-Gw_alIITdn2xZ18l4j_v--Y3nj1H6_kBtYzv7J4WUcQY3ZQ3S8wO-xr-60cO6tJnBn3I2pHgq5SGd-z3ln1KSGQY9Pw/360fx360f" },
                { name: "MAC-10 | Кость", value: 55, img: "https://community.cloudflare.steamstatic.com/economy/image/-9a81dlWLwJ2UUGcVs_nsVtzdOEdtWwKGZZLQHTxDZ7I56KU0Zwwo4NUX4oFJZEHLbXH5ApeO4YmlhxYQknCRvCo04DEVlxkKgpou-6kejh33PLFJQJD_9W7m4-0hPL5DLfQkm5u5Mx2gv2--Y3nj1H6_kBtYzv7J4WUcQY3Yg3S81e2xr-60cO6tJnBn3I2pHgq5SGd-z3ln1KSGQY9Pw/360fx360f" },
                { name: "UMP-45 | Кость", value: 65, img: "https://community.cloudflare.steamstatic.com/economy/image/-9a81dlWLwJ2UUGcVs_nsVtzdOEdtWwKGZZLQHTxDZ7I56KU0Zwwo4NUX4oFJZEHLbXH5ApeO4YmlhxYQknCRvCo04DEVlxkKgpou-6kejh33PLFJQJD_9W7m4-0hPL5DLfQkm5u5Mx2gv2--Y3nj1H6_kBtYzv7J4WUcQY3Yg3S81e2xr-60cO6tJnBn3I2pHgq5SGd-z3ln1KSGQY9Pw/360fx360f" }
            ],
            
            // Необычные (uncommon)
            uncommon: [
                { name: "M4A1-S | Кровавый тигр", value: 300, img: "https://community.cloudflare.steamstatic.com/economy/image/-9a81dlWLwJ2UUGcVs_nsVtzdOEdtWwKGZZLQHTxDZ7I56KU0Zwwo4NUX4oFJZEHLbXH5ApeO4YmlhxYQknCRvCo04DEVlxkKgpot621FAR17PLfYQJD_9W7m4-0hPL5DLfQkm5u5Mx2gv2--Y3nj1H6_kBtYzv7J4WUcQY3ZV_B5lO_xr-60cO6tJnBn3I2pHgq5SGd-wv330-SVwY9Pw/360fx360f" },
                { name: "AK-47 | Красная линия", value: 400, img: "https://community.cloudflare.steamstatic.com/economy/image/-9a81dlWLwJ2UUGcVs_nsVtzdOEdtWwKGZZLQHTxDZ7I56KU0Zwwo4NUX4oFJZEHLbXH5ApeO4YmlhxYQknCRvCo04DEVlxkKgpot621FAR17PLfYQJD_9W7m4-0hPL5DLfQkm5u5Mx2gv2--Y3nj1H6_kBtYzv7J4WUcQY3ZV_B5lO_xr-60cO6tJnBn3I2pHgq5SGd-wv330-SVwY9Pw/360fx360f" },
                { name: "AWP | Электрический hive", value: 500, img: "https://community.cloudflare.steamstatic.com/economy/image/-9a81dlWLwJ2UUGcVs_nsVtzdOEdtWwKGZZLQHTxDZ7I56KU0Zwwo4NUX4oFJZEHLbXH5ApeO4YmlhxYQknCRvCo04DEVlxkKgpou-6kejhzw8XYaQJH9d-zkYS0m_7zNq_ummpD7cBOhujT8omj3gHg-0I5ZW-hI9WccgM_Y1nS-QC5xr-6gJO6vJydz3sw7SJw-z-DyROfVxI-YfsXtw/360fx360f" },
                { name: "Desert Eagle | Коричневая змея", value: 250, img: "https://community.cloudflare.steamstatic.com/economy/image/-9a81dlWLwJ2UUGcVs_nsVtzdOEdtWwKGZZLQHTxDZ7I56KU0Zwwo4NUX4oFJZEHLbXH5ApeO4YmlhxYQknCRvCo04DEVlxkKgpou-6kejhzw8XYaQJH9d-zkYS0m_7zNq_ummpD7cBOhujT8omj3gHg-0I5ZW-hI9WccgM_Y1nS-QC5xr-6gJO6vJydz3sw7SJw-z-DyROfVxI-YfsXtw/360fx360f" }
            ],
            
            // Редкие (rare)
            rare: [
                { name: "M4A4 | Змеиный укус", value: 800, img: "https://community.cloudflare.steamstatic.com/economy/image/-9a81dlWLwJ2UUGcVs_nsVtzdOEdtWwKGZZLQHTxDZ7I56KU0Zwwo4NUX4oFJZEHLbXH5ApeO4YmlhxYQknCRvCo04DEVlxkKgpot621FAR17PLfYQJD_9W7m4-0hPL5DLfQkm5u5Mx2gv2--Y3nj1H6_kBtYzv7J4WUcQY3ZV_B5lO_xr-60cO6tJnBn3I2pHgq5SGd-wv330-SVwY9Pw/360fx360f" },
                { name: "AK-47 | Вулкан", value: 1200, img: "https://community.cloudflare.steamstatic.com/economy/image/-9a81dlWLwJ2UUGcVs_nsVtzdOEdtWwKGZZLQHTxDZ7I56KU0Zwwo4NUX4oFJZEHLbXH5ApeO4YmlhxYQknCRvCo04DEVlxkKgpot621FAR17PLfYQJD_9W7m4-0hPL5DLfQkm5u5Mx2gv2--Y3nj1H6_kBtYzv7J4WUcQY3ZV_B5lO_xr-60cO6tJnBn3I2pHgq5SGd-wv330-SVwY9Pw/360fx360f" },
                { name: "Desert Eagle | Прямо из ада", value: 1000, img: "https://community.cloudflare.steamstatic.com/economy/image/-9a81dlWLwJ2UUGcVs_nsVtzdOEdtWwKGZZLQHTxDZ7I56KU0Zwwo4NUX4oFJZEHLbXH5ApeO4YmlhxYQknCRvCo04DEVlxkKgpou-6kejhzw8XYaQJH9d-zkYS0m_7zNq_ummpD7cBOhujT8omj3gHg-0I5ZW-hI9WccgM_Y1nS-QC5xr-6gJO6vJydz3sw7SJw-z-DyROfVxI-YfsXtw/360fx360f" },
                { name: "AWP | Красная линия", value: 1500, img: "https://community.cloudflare.steamstatic.com/economy/image/-9a81dlWLwJ2UUGcVs_nsVtzdOEdtWwKGZZLQHTxDZ7I56KU0Zwwo4NUX4oFJZEHLbXH5ApeO4YmlhxYQknCRvCo04DEVlxkKgpou-6kejhzw8XYaQJH9d-zkYS0m_7zNq_ummpD7cBOhujT8omj3gHg-0I5ZW-hI9WccgM_Y1nS-QC5xr-6gJO6vJydz3sw7SJw-z-DyROfVxI-YfsXtw/360fx360f" }
            ],
            
            // Мифические (mythical)
            mythical: [
                { name: "AWP | Азимов", value: 2500, img: "https://community.cloudflare.steamstatic.com/economy/image/-9a81dlWLwJ2UUGcVs_nsVtzdOEdtWwKGZZLQHTxDZ7I56KU0Zwwo4NUX4oFJZEHLbXH5ApeO4YmlhxYQknCRvCo04DEVlxkKgpou-6kejhzw8XYaQJH9d-zkYS0m_7zNq_ummpD7cBOhujT8omj3gHg-0I5ZW-hI9WccgM_Y1nS-QC5xr-6gJO6vJydz3sw7SJw-z-DyROfVxI-YfsXtw/360fx360f" },
                { name: "M4A1-S | Цифровой китель", value: 2000, img: "https://community.cloudflare.steamstatic.com/economy/image/-9a81dlWLwJ2UUGcVs_nsVtzdOEdtWwKGZZLQHTxDZ7I56KU0Zwwo4NUX4oFJZEHLbXH5ApeO4YmlhxYQknCRvCo04DEVlxkKgpot621FAR17PLfYQJD_9W7m4-0hPL5DLfQkm5u5Mx2gv2--Y3nj1H6_kBtYzv7J4WUcQY3ZV_B5lO_xr-60cO6tJnBn3I2pHgq5SGd-wv330-SVwY9Pw/360fx360f" },
                { name: "AK-47 | Азимов", value: 2800, img: "https://community.cloudflare.steamstatic.com/economy/image/-9a81dlWLwJ2UUGcVs_nsVtzdOEdtWwKGZZLQHTxDZ7I56KU0Zwwo4NUX4oFJZEHLbXH5ApeO4YmlhxYQknCRvCo04DEVlxkKgpot621FAR17PLfYQJD_9W7m4-0hPL5DLfQkm5u5Mx2gv2--Y3nj1H6_kBtYzv7J4WUcQY3ZV_B5lO_xr-60cO6tJnBn3I2pHgq5SGd-wv330-SVwY9Pw/360fx360f" }
            ],
            
            // Легендарные (legendary)
            legendary: [
                { name: "Нож | Слайдер", value: 5000, img: "https://community.cloudflare.steamstatic.com/economy/image/-9a81dlWLwJ2UUGcVs_nsVtzdOEdtWwKGZZLQHTxDZ7I56KU0Zwwo4NUX4oFJZEHLbXH5ApeO4YmlhxYQknCRvCo04DEVlxkKgpou-6kejhzw8XYaQJH9d-zkYS0m_7zNq_ummpD7cBOhujT8omj3gHg-0I5ZW-hI9WccgM_Y1nS-QC5xr-6gJO6vJydz3sw7SJw-z-DyROfVxI-YfsXtw/360fx360f" },
                { name: "Перчатки | Спектр", value: 6000, img: "https://community.cloudflare.steamstatic.com/economy/image/-9a81dlWLwJ2UUGcVs_nsVtzdOEdtWwKGZZLQHTxDZ7I56KU0Zwwo4NUX4oFJZEHLbXH5ApeO4YmlhxYQknCRvCo04DEVlxkKgpou-6kejhzw8XYaQJH9d-zkYS0m_7zNq_ummpD7cBOhujT8omj3gHg-0I5ZW-hI9WccgM_Y1nS-QC5xr-6gJO6vJydz3sw7SJw-z-DyROfVxI-YfsXtw/360fx360f" },
                { name: "Нож | Байонет", value: 7000, img: "https://community.cloudflare.steamstatic.com/economy/image/-9a81dlWLwJ2UUGcVs_nsVtzdOEdtWwKGZZLQHTxDZ7I56KU0Zwwo4NUX4oFJZEHLbXH5ApeO4YmlhxYQknCRvCo04DEVlxkKgpou-6kejhzw8XYaQJH9d-zkYS0m_7zNq_ummpD7cBOhujT8omj3gHg-0I5ZW-hI9WccgM_Y1nS-QC5xr-6gJO6vJydz3sw7SJw-z-DyROfVxI-YfsXtw/360fx360f" }
            ],
            
            // Древние (ancient)
            ancient: [
                { name: "AK-47 | Огненный змей", value: 8000, img: "https://community.cloudflare.steamstatic.com/economy/image/-9a81dlWLwJ2UUGcVs_nsVtzdOEdtWwKGZZLQHTxDZ7I56KU0Zwwo4NUX4oFJZEHLbXH5ApeO4YmlhxYQknCRvCo04DEVlxkKgpot621FAR17PLfYQJD_9W7m4-0hPL5DLfQkm5u5Mx2gv2--Y3nj1H6_kBtYzv7J4WUcQY3ZV_B5lO_xr-60cO6tJnBn3I2pHgq5SGd-wv330-SVwY9Pw/360fx360f" },
                { name: "AWP | Дракон Лор", value: 10000, img: "https://community.cloudflare.steamstatic.com/economy/image/-9a81dlWLwJ2UUGcVs_nsVtzdOEdtWwKGZZLQHTxDZ7I56KU0Zwwo4NUX4oFJZEHLbXH5ApeO4YmlhxYQknCRvCo04DEVlxkKgpou-6kejhzw8XYaQJH9d-zkYS0m_7zNq_ummpD7cBOhujT8omj3gHg-0I5ZW-hI9WccgM_Y1nS-QC5xr-6gJO6vJydz3sw7SJw-z-DyROfVxI-YfsXtw/360fx360f" },
                { name: "Нож | Сапфир", value: 12000, img: "https://community.cloudflare.steamstatic.com/economy/image/-9a81dlWLwJ2UUGcVs_nsVtzdOEdtWwKGZZLQHTxDZ7I56KU0Zwwo4NUX4oFJZEHLbXH5ApeO4YmlhxYQknCRvCo04DEVlxkKgpou-6kejhzw8XYaQJH9d-zkYS0m_7zNq_ummpD7cBOhujT8omj3gHg-0I5ZW-hI9WccgM_Y1nS-QC5xr-6gJO6vJydz3sw7SJw-z-DyROfVxI-YfsXtw/360fx360f" }
            ]
        };

        // Данные о кейсах
        const casesData = {
            1: {
                name: "Кейс CS2 \"Prisma\"",
                price: 2500,
                legendaryChance: 2,
                items: [
                    ...cs2Items.common.slice(0, 10),
                    ...cs2Items.uncommon.slice(0, 8),
                    ...cs2Items.rare.slice(0, 4),
                    ...cs2Items.legendary.slice(0, 1),
                    ...cs2Items.ancient.slice(0, 1)
                ]
            },
            2: {
                name: "Кейс CS2 \"Operation\"",
                price: 3200,
                legendaryChance: 3,
                items: [
                    ...cs2Items.common.slice(2, 10),
                    ...cs2Items.uncommon.slice(1, 7),
                    ...cs2Items.rare.slice(0, 3),
                    ...cs2Items.mythical.slice(0, 2),
                    ...cs2Items.legendary.slice(1, 2),
                    ...cs2Items.ancient.slice(1, 2)
                ]
            }
        };

        // Система пользователей
        const users = {
            // Предустановленный аккаунт администратора
            "k1lame": {
                password: "k1lame1234",
                balance: 12540,
                casesOpened: 0,
                totalValue: 0,
                bestItem: "Нет",
                createdAt: new Date().toLocaleDateString(),
                isAdmin: true
            }
        };

        // Текущий пользователь
        let currentUser = null;

        // Текущее состояние
        const gameState = {
            selectedCase: null,
            isSpinning: false,
            spinResult: null,
            recentDrops: [],
            supportMessages: []
        };

        // DOM элементы
        const adminBtn = document.getElementById('admin-btn');
        const userBalanceSpan = document.getElementById('user-balance');
        const userAvatarBtn = document.getElementById('user-avatar-btn');
        const caseCards = document.querySelectorAll('.case-card');
        const openCaseButtons = document.querySelectorAll('.open-case-btn');
        const caseOpeningSection = document.getElementById('case-opening-section');
        const closeOpeningBtn = document.getElementById('close-opening');
        const spinBtn = document.getElementById('spin-btn');
        const spinPriceSpan = document.getElementById('spin-price');
        const openingCaseName = document.getElementById('opening-case-name');
        const caseItemsScroll = document.getElementById('case-items-scroll');
        const itemsPreview = document.getElementById('items-preview');
        const caseSelection = document.getElementById('case-selection');
        const casesTab = document.getElementById('cases-tab');
        const helpTab = document.getElementById('help-tab');
        const footerHelp = document.getElementById('footer-help');
        
        // Чат поддержки
        const supportChat = document.getElementById('support-chat');
        const chatClose = document.getElementById('chat-close');
        const chatBody = document.getElementById('chat-body');
        const chatUsername = document.getElementById('chat-username');
        const chatMessage = document.getElementById('chat-message');
        const chatSend = document.getElementById('chat-send');
        
        // Модальные окна
        const authModal = document.getElementById('auth-modal');
        const loginTab = document.getElementById('login-tab');
        const registerTab = document.getElementById('register-tab');
        const loginForm = document.getElementById('login-form');
        const registerForm = document.getElementById('register-form');
        const loginBtn = document.getElementById('login-btn');
        const registerBtn = document.getElementById('register-btn');
        const continueGuest = document.getElementById('continue-guest');
        const switchToLogin = document.getElementById('switch-to-login');
        const loginError = document.getElementById('login-error');
        const registerError = document.getElementById('register-error');
        const loginUsername = document.getElementById('login-username');
        const loginPassword = document.getElementById('login-password');
        const registerUsername = document.getElementById('register-username');
        const registerPassword = document.getElementById('register-password');
        const registerConfirm = document.getElementById('register-confirm');
        
        const profileModal = document.getElementById('profile-modal');
        const closeProfileModalBtn = document.getElementById('close-profile-modal');
        const profileName = document.getElementById('profile-name');
        const profileBalance = document.getElementById('profile-balance');
        const profileCases = document.getElementById('profile-cases');
        const profileTotal = document.getElementById('profile-total');
        const profileBest = document.getElementById('profile-best');
        const profileCreated = document.getElementById('profile-created');
        const profileAvatarImg = document.getElementById('profile-avatar-img');
        const logoutBtn = document.getElementById('logout-btn');
        
        const resultModal = document.getElementById('result-modal');
        const closeResultModalBtn = document.getElementById('close-result-modal');
        const closeModalBtn = document.getElementById('close-modal-btn');
        const openAgainBtn = document.getElementById('open-again-btn');
        const wonItemImg = document.getElementById('won-item-img');
        const wonItemName = document.getElementById('won-item-name');
        const wonItemPrice = document.getElementById('won-item-price');
        const wonItemRarity = document.getElementById('won-item-rarity');
        
        const adminModal = document.getElementById('admin-modal');
        const closeAdminModalBtn = document.getElementById('close-admin-modal');
        const adminPasswordInput = document.getElementById('admin-password');
        const adminContent = document.getElementById('admin-content');
        const adminBalanceInput = document.getElementById('admin-balance');
        const adminCase1PriceInput = document.getElementById('admin-case1-price');
        const adminCase2PriceInput = document.getElementById('admin-case2-price');
        const adminCase1ChanceInput = document.getElementById('admin-case1-chance');
        const adminCase2ChanceInput = document.getElementById('admin-case2-chance');
        const adminSupportMessages = document.getElementById('admin-support-messages');
        const adminSaveBtn = document.getElementById('admin-save-btn');
        const adminCancelBtn = document.getElementById('admin-cancel-btn');
        
        const dropsContainer = document.getElementById('drops-container');

        // Инициализация
        function init() {
            // Начинаем в гостевом режиме
            currentUser = null;
            updateUserDisplay();
            
            // Загружаем историю выпадений
            loadRecentDrops();
            startDropAnimation();
            
            // Инициализируем обработчики событий
            initEventListeners();
            
            // Обновляем кнопки открытия кейсов
            updateOpenCaseButtons();
        }

        // Инициализация обработчиков событий
        function initEventListeners() {
            // Выбор кейса
            caseCards.forEach(card => {
                card.addEventListener('click', function() {
                    const caseId = parseInt(this.dataset.case);
                    openCaseView(caseId);
                });
            });
            
            // Закрытие окна открытия кейса
            closeOpeningBtn.addEventListener('click', () => {
                caseOpeningSection.classList.remove('active');
                caseSelection.style.display = 'block';
            });
            
            // Кнопка прокрутки
            spinBtn.addEventListener('click', spinCase);
            
            // Вкладка "Кейсы"
            casesTab.addEventListener('click', (e) => {
                e.preventDefault();
                caseOpeningSection.classList.remove('active');
                caseSelection.style.display = 'block';
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
            
            // Чат поддержки
            helpTab.addEventListener('click', (e) => {
                e.preventDefault();
                supportChat.classList.toggle('active');
            });
            
            footerHelp.addEventListener('click', (e) => {
                e.preventDefault();
                supportChat.classList.toggle('active');
            });
            
            chatClose.addEventListener('click', () => {
                supportChat.classList.remove('active');
            });
            
            chatSend.addEventListener('click', sendSupportMessage);
            
            chatMessage.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') {
                    sendSupportMessage();
                }
            });
            
            // Админ панель
            adminBtn.addEventListener('click', () => {
                adminModal.style.display = 'flex';
                adminPasswordInput.value = '';
                adminContent.style.display = 'none';
            });
            
            closeAdminModalBtn.addEventListener('click', () => {
                adminModal.style.display = 'none';
            });
            
            adminPasswordInput.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') {
                    checkAdminPassword();
                }
            });
            
            adminSaveBtn.addEventListener('click', saveAdminSettings);
            adminCancelBtn.addEventListener('click', () => {
                adminModal.style.display = 'none';
            });
            
            // Профиль пользователя
            userAvatarBtn.addEventListener('click', showProfile);
            
            closeProfileModalBtn.addEventListener('click', () => {
                profileModal.style.display = 'none';
            });
            
            closeModalBtn.addEventListener('click', () => {
                resultModal.style.display = 'none';
            });
            
            closeResultModalBtn.addEventListener('click', () => {
                resultModal.style.display = 'none';
            });
            
            openAgainBtn.addEventListener('click', () => {
                resultModal.style.display = 'none';
                if (gameState.selectedCase) {
                    openCaseView(gameState.selectedCase);
                }
            });
            
            logoutBtn.addEventListener('click', logout);
            
            // Авторизация
            loginTab.addEventListener('click', () => {
                loginTab.classList.add('active');
                registerTab.classList.remove('active');
                loginForm.style.display = 'block';
                registerForm.style.display = 'none';
                loginError.classList.remove('active');
                registerError.classList.remove('active');
            });
            
            registerTab.addEventListener('click', () => {
                registerTab.classList.add('active');
                loginTab.classList.remove('active');
                registerForm.style.display = 'block';
                loginForm.style.display = 'none';
                loginError.classList.remove('active');
                registerError.classList.remove('active');
            });
            
            loginBtn.addEventListener('click', login);
            registerBtn.addEventListener('click', register);
            
            continueGuest.addEventListener('click', (e) => {
                e.preventDefault();
                authModal.style.display = 'none';
            });
            
            switchToLogin.addEventListener('click', (e) => {
                e.preventDefault();
                loginTab.click();
            });
            
            // Авторизация по нажатию Enter
            loginUsername.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') login();
            });
            
            loginPassword.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') login();
            });
            
            registerUsername.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') register();
            });
            
            registerPassword.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') register();
            });
            
            registerConfirm.addEventListener('keyup', (e) => {
                if (e.key === 'Enter') register();
            });
        }

        // Авторизация
        function login() {
            const username = loginUsername.value.trim();
            const password = loginPassword.value;
            
            if (!username || !password) {
                loginError.textContent = "Введите логин и пароль";
                loginError.classList.add('active');
                return;
            }
            
            if (users[username] && users[username].password === password) {
                currentUser = username;
                updateUserDisplay();
                updateOpenCaseButtons();
                authModal.style.display = 'none';
                loginUsername.value = '';
                loginPassword.value = '';
                loginError.classList.remove('active');
                
                // Показываем админ-панель для администратора
                if (users[username].isAdmin) {
                    adminBtn.classList.add('visible');
                }
            } else {
                loginError.textContent = "Неверный логин или пароль";
                loginError.classList.add('active');
            }
        }

        // Регистрация
        function register() {
            const username = registerUsername.value.trim();
            const password = registerPassword.value;
            const confirm = registerConfirm.value;
            
            if (!username || !password || !confirm) {
                registerError.textContent = "Заполните все поля";
                registerError.classList.add('active');
                return;
            }
            
            if (password !== confirm) {
                registerError.textContent = "Пароли не совпадают";
                registerError.classList.add('active');
                return;
            }
            
            if (username.length < 3) {
                registerError.textContent = "Логин должен быть не менее 3 символов";
                registerError.classList.add('active');
                return;
            }
            
            if (password.length < 6) {
                registerError.textContent = "Пароль должен быть не менее 6 символов";
                registerError.classList.add('active');
                return;
            }
            
            if (users[username]) {
                registerError.textContent = "Логин уже занят";
                registerError.classList.add('active');
                return;
            }
            
            // Создаем нового пользователя
            users[username] = {
                password: password,
                balance: systemSettings.defaultBalance,
                casesOpened: 0,
                totalValue: 0,
                bestItem: "Нет",
                createdAt: new Date().toLocaleDateString(),
                isAdmin: false
            };
            
            // Автоматически входим
            currentUser = username;
            updateUserDisplay();
            updateOpenCaseButtons();
            authModal.style.display = 'none';
            registerUsername.value = '';
            registerPassword.value = '';
            registerConfirm.value = '';
            registerError.classList.remove('active');
            
            // Переключаемся на вкладку входа
            loginTab.click();
        }

        // Выход из аккаунта
        function logout() {
            currentUser = null;
            profileModal.style.display = 'none';
            updateUserDisplay();
            updateOpenCaseButtons();
            adminBtn.classList.remove('visible');
        }

        // Обновление отображения пользователя
        function updateUserDisplay() {
            if (!currentUser) {
                userBalanceSpan.textContent = "0";
                userAvatarBtn.querySelector('img').src = "https://cdn-icons-png.flaticon.com/512/847/847969.png";
                return;
            }
            
            const user = users[currentUser];
            userBalanceSpan.textContent = user.balance.toLocaleString();
            
            // Обновляем аватар (простая генерация цвета на основе имени)
            const colors = ['#FF6B6B', '#4ECDC4', '#FFD166', '#06D6A0', '#118AB2', '#EF476F'];
            const colorIndex = currentUser.length % colors.length;
            const avatarColor = colors[colorIndex];
            
            // Создаем простой аватар с инициалами
            const canvas = document.createElement('canvas');
            canvas.width = 100;
            canvas.height = 100;
            const ctx = canvas.getContext('2d');
            
            // Фон
            ctx.fillStyle = avatarColor;
            ctx.fillRect(0, 0, 100, 100);
            
            // Инициалы
            ctx.fillStyle = '#FFFFFF';
            ctx.font = 'bold 40px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            const initials = currentUser.substring(0, 2).toUpperCase();
            ctx.fillText(initials, 50, 50);
            
            const avatarUrl = canvas.toDataURL();
            userAvatarBtn.querySelector('img').src = avatarUrl;
        }

        // Обновление кнопок открытия кейсов
        function updateOpenCaseButtons() {
            const isLoggedIn = currentUser !== null;
            
            openCaseButtons.forEach(btn => {
                if (isLoggedIn) {
                    btn.disabled = false;
                    btn.innerHTML = `<i class="fas fa-box-open"></i> Открыть кейс`;
                } else {
                    btn.disabled = true;
                    btn.innerHTML = `<i class="fas fa-lock"></i> Войдите для открытия`;
                }
            });
            
            spinBtn.disabled = !isLoggedIn;
        }

        // Показать профиль
        function showProfile() {
            if (!currentUser) {
                // Если не авторизован, показываем окно авторизации
                authModal.style.display = 'flex';
                return;
            }
            
            const user = users[currentUser];
            profileName.textContent = currentUser;
            profileBalance.textContent = user.balance.toLocaleString();
            profileCases.textContent = user.casesOpened;
            profileTotal.textContent = user.totalValue.toLocaleString();
            profileBest.textContent = user.bestItem;
            profileCreated.textContent = user.createdAt;
            profileAvatarImg.src = userAvatarBtn.querySelector('img').src;
            
            profileModal.style.display = 'flex';
        }

        // Открыть вид открытия кейса
        function openCaseView(caseId) {
            if (!currentUser) {
                authModal.style.display = 'flex';
                return;
            }
            
            gameState.selectedCase = caseId;
            const caseData = casesData[caseId];
            
            // Обновляем интерфейс
            openingCaseName.textContent = caseData.name;
            spinPriceSpan.textContent = caseData.price.toLocaleString();
            
            // Инициализируем прокрутку
            initCaseScroll(caseData);
            
            // Инициализируем превью предметов
            initItemsPreview(caseData);
            
            // Показываем секцию открытия кейса
            caseOpeningSection.classList.add('active');
            caseSelection.style.display = 'none';
            
            // Прокручиваем к началу
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Инициализация прокрутки кейсов
        function initCaseScroll(caseData) {
            caseItemsScroll.innerHTML = '';
            
            // Создаем много дубликатов для эффекта бесконечной прокрутки
            const items = [...caseData.items, ...caseData.items, ...caseData.items, ...caseData.items];
            
            items.forEach((item, index) => {
                const itemElement = document.createElement('div');
                itemElement.className = 'scroll-item';
                itemElement.innerHTML = `
                    <img src="${item.img}" alt="${item.name}" onerror="this.src='https://community.cloudflare.steamstatic.com/economy/image/-9a81dlWLwJ2UUGcVs_nsVtzdOEdtWwKGZZLQHTxDZ7I56KU0Zwwo4NUX4oFJZEHLbXH5ApeO4YmlhxYQknCRvCo04DEVlxkKgpou-6kejhzw8XYaQJH9d-zkYS0m_7zNq_ummpD7cBOhujT8omj3gHg-0I5ZW-hI9WccgM_Y1nS-QC5xr-6gJO6vJydz3sw7SJw-z-DyROfVxI-YfsXtw/360fx360f'">
                    <div class="scroll-item-name">${item.name}</div>
                    <div class="scroll-item-price">${item.value} <i class="fas fa-coins"></i></div>
                `;
                
                // Определяем редкость
                let rarity = 'common';
                if (item.value >= 8000) rarity = 'ancient';
                else if (item.value >= 5000) rarity = 'legendary';
                else if (item.value >= 2000) rarity = 'mythical';
                else if (item.value >= 800) rarity = 'rare';
                else if (item.value >= 300) rarity = 'uncommon';
                
                itemElement.classList.add(`rarity-${rarity}`);
                caseItemsScroll.appendChild(itemElement);
            });
        }

        // Инициализация превью предметов
        function initItemsPreview(caseData) {
            itemsPreview.innerHTML = '';
            
            // Показываем только уникальные предметы
            const uniqueItems = [];
            const seen = new Set();
            
            caseData.items.forEach(item => {
                if (!seen.has(item.name)) {
                    seen.add(item.name);
                    uniqueItems.push(item);
                }
            });
            
            // Сортируем по цене
            uniqueItems.sort((a, b) => b.value - a.value);
            
            // Показываем до 12 предметов
            uniqueItems.slice(0, 12).forEach(item => {
                const previewItem = document.createElement('div');
                previewItem.className = 'preview-item';
                
                // Определяем редкость
                let rarity = 'common';
                if (item.value >= 8000) rarity = 'ancient';
                else if (item.value >= 5000) rarity = 'legendary';
                else if (item.value >= 2000) rarity = 'mythical';
                else if (item.value >= 800) rarity = 'rare';
                else if (item.value >= 300) rarity = 'uncommon';
                
                previewItem.innerHTML = `
                    <img src="${item.img}" alt="${item.name}" onerror="this.src='https://community.cloudflare.steamstatic.com/economy/image/-9a81dlWLwJ2UUGcVs_nsVtzdOEdtWwKGZZLQHTxDZ7I56KU0Zwwo4NUX4oFJZEHLbXH5ApeO4YmlhxYQknCRvCo04DEVlxkKgpou-6kejhzw8XYaQJH9d-zkYS0m_7zNq_ummpD7cBOhujT8omj3gHg-0I5ZW-hI9WccgM_Y1nS-QC5xr-6gJO6vJydz3sw7SJw-z-DyROfVxI-YfsXtw/360fx360f'">
                    <div class="preview-name">${item.name}</div>
                    <div class="preview-price">${item.value} <i class="fas fa-coins"></i></div>
                `;
                
                previewItem.classList.add(`rarity-${rarity}`);
                itemsPreview.appendChild(previewItem);
            });
        }

        // Прокрутка кейса
        function spinCase() {
            if (gameState.isSpinning) return;
            
            if (!currentUser) {
                authModal.style.display = 'flex';
                return;
            }
            
            const caseId = gameState.selectedCase;
            const caseData = casesData[caseId];
            const user = users[currentUser];
            
            // Проверяем баланс
            if (user.balance < caseData.price) {
                alert('Недостаточно средств для открытия кейса!');
                return;
            }
            
            // Списываем деньги
            user.balance -= caseData.price;
            user.casesOpened++;
            
            // Начинаем прокрутку
            gameState.isSpinning = true;
            spinBtn.disabled = true;
            spinBtn.innerHTML = `<i class="fas fa-spinner fa-spin"></i> Открываем...`;
            
            // Получаем случайный предмет с учетом шансов
            const randomItem = getRandomItemWithChance(caseData);
            gameState.spinResult = randomItem;
            
            // Определяем редкость
            let rarity = 'common';
            if (randomItem.value >= 8000) rarity = 'ancient';
            else if (randomItem.value >= 5000) rarity = 'legendary';
            else if (randomItem.value >= 2000) rarity = 'mythical';
            else if (randomItem.value >= 800) rarity = 'rare';
            else if (randomItem.value >= 300) rarity = 'uncommon';
            
            // Анимация прокрутки
            const scrollItems = caseItemsScroll.querySelectorAll('.scroll-item');
            const totalItems = scrollItems.length;
            
            // Находим индекс случайного предмета (не в начале)
            let targetIndex;
            for (let i = 0; i < totalItems; i++) {
                if (scrollItems[i].querySelector('.scroll-item-name').textContent === randomItem.name) {
                    targetIndex = i;
                    break;
                }
            }
            
            // Если не нашли, берем случайный индекс
            if (!targetIndex) targetIndex = Math.floor(Math.random() * (totalItems - 100)) + 50;
            
            // Сбрасываем активный класс
            scrollItems.forEach(item => item.classList.remove('active'));
            
            // Быстрая прокрутка с замедлением
            let currentPosition = 0;
            const targetPosition = -targetIndex * 220; // 220px ширина предмета
            const duration = 2500; // 2.5 секунды
            const startTime = Date.now();
            
            const animateScroll = () => {
                const elapsed = Date.now() - startTime;
                const progress = Math.min(elapsed / duration, 1);
                
                // Эффект замедления в конце
                let easing;
                if (progress < 0.8) {
                    // Быстрая прокрутка в начале
                    easing = progress * 1.2;
                } else {
                    // Замедление в конце
                    easing = 0.96 + (progress - 0.8) * 0.2;
                }
                
                currentPosition = targetPosition * easing;
                caseItemsScroll.style.transform = `translateX(${currentPosition}px)`;
                
                // Подсвечиваем центральный элемент в конце
                if (progress > 0.9) {
                    const centerIndex = Math.round(-currentPosition / 220) % totalItems;
                    if (centerIndex >= 0 && centerIndex < totalItems) {
                        scrollItems.forEach((item, i) => {
                            item.classList.toggle('active', i === centerIndex);
                        });
                    }
                }
                
                if (progress < 1) {
                    requestAnimationFrame(animateScroll);
                } else {
                    // Завершаем анимацию
                    setTimeout(() => {
                        // Показываем результат
                        showResultModal(randomItem, rarity);
                        
                        // Обновляем статистику пользователя
                        user.totalValue += randomItem.value;
                        if (user.bestItem === "Нет" || randomItem.value > getItemValue(user.bestItem)) {
                            user.bestItem = randomItem.name;
                        }
                        
                        // Добавляем в историю выпадений
                        addToRecentDrops(randomItem);
                        
                        // Обновляем отображение
                        updateUserDisplay();
                        
                        // Сбрасываем состояние
                        gameState.isSpinning = false;
                        spinBtn.disabled = false;
                        spinBtn.innerHTML = `<i class="fas fa-play"></i> Открыть за <span id="spin-price">${caseData.price.toLocaleString()}</span>`;
                    }, 500);
                }
            };
            
            requestAnimationFrame(animateScroll);
        }

        // Получение случайного предмета с учетом шансов
        function getRandomItemWithChance(caseData) {
            const items = caseData.items;
            const legendaryChance = caseData.legendaryChance;
            
            // Определяем, будет ли легендарный предмет
            const isLegendary = Math.random() * 100 < legendaryChance;
            
            if (isLegendary) {
                // Фильтруем легендарные и древние предметы
                const legendaryItems = items.filter(item => item.value >= 5000);
                if (legendaryItems.length > 0) {
                    return legendaryItems[Math.floor(Math.random() * legendaryItems.length)];
                }
            }
            
            // Иначе возвращаем случайный предмет с учетом весов
            const weights = items.map(item => {
                if (item.value >= 2000) return 1; // Мифические
                if (item.value >= 800) return 3; // Редкие
                if (item.value >= 300) return 5; // Необычные
                return 10; // Обычные
            });
            
            const totalWeight = weights.reduce((sum, weight) => sum + weight, 0);
            let random = Math.random() * totalWeight;
            
            for (let i = 0; i < items.length; i++) {
                random -= weights[i];
                if (random <= 0) {
                    return items[i];
                }
            }
            
            return items[0];
        }

        // Получение стоимости предмета по названию
        function getItemValue(itemName) {
            for (const rarity in cs2Items) {
                const item = cs2Items[rarity].find(i => i.name === itemName);
                if (item) return item.value;
            }
            return 0;
        }

        // Показать модальное окно с результатом
        function showResultModal(item, rarity) {
            wonItemImg.src = item.img;
            wonItemName.textContent = item.name;
            wonItemPrice.textContent = `Цена: ${item.value} <i class="fas fa-coins"></i>`;
            wonItemRarity.textContent = getRarityName(rarity);
            wonItemRarity.className = 'item-rarity';
            wonItemRarity.classList.add(`rarity-${rarity}`);
            
            resultModal.style.display = 'flex';
        }

        // Загрузка истории выпадений
        function loadRecentDrops() {
            // Примерные начальные данные
            const initialDrops = [
                { user: "ProPlayer", item: cs2Items.ancient[0], time: "2 мин назад" },
                { user: "LuckyGuy", item: cs2Items.legendary[1], time: "5 мин назад" },
                { user: "CS2Fan", item: cs2Items.mythical[0], time: "10 мин назад" },
                { user: "Trader", item: cs2Items.rare[2], time: "15 мин назад" },
                { user: "Newbie", item: cs2Items.uncommon[1], time: "20 мин назад" },
                { user: "Veteran", item: cs2Items.ancient[1], time: "25 мин назад" },
                { user: "Gambler", item: cs2Items.common[2], time: "30 мин назад" }
            ];
            
            initialDrops.forEach(drop => {
                gameState.recentDrops.push(drop);
            });
        }

        // Запуск анимации выпадений
        function startDropAnimation() {
            let dropIndex = 0;
            
            function createDrop() {
                if (dropIndex >= gameState.recentDrops.length) {
                    dropIndex = 0;
                }
                
                const drop = gameState.recentDrops[dropIndex];
                addDropToSidebar(drop.user, drop.item, drop.time);
                dropIndex++;
                
                // Случайный интервал между 20-50 секундами
                const nextDropTime = 20000 + Math.random() * 30000;
                setTimeout(createDrop, nextDropTime);
            }
            
            // Начинаем с небольшой задержки
            setTimeout(createDrop, 2000);
        }

        // Добавление выпадения в боковую панель
        function addDropToSidebar(username, item, time) {
            const dropItem = document.createElement('div');
            dropItem.className = 'drop-item';
            
            // Определяем редкость для цвета границы
            let rarity = 'common';
            if (item.value >= 8000) rarity = 'ancient';
            else if (item.value >= 5000) rarity = 'legendary';
            else if (item.value >= 2000) rarity = 'mythical';
            else if (item.value >= 800) rarity = 'rare';
            else if (item.value >= 300) rarity = 'uncommon';
            
            // Цвет границы в зависимости от редкости
            let borderColor = '#969696'; // common
            if (rarity === 'uncommon') borderColor = '#4db53a';
            else if (rarity === 'rare') borderColor = '#4c6ef4';
            else if (rarity === 'mythical') borderColor = '#b6509b';
            else if (rarity === 'legendary') borderColor = '#ffd700';
            else if (rarity === 'ancient') borderColor = '#eb4b4b';
            
            dropItem.style.borderLeftColor = borderColor;
            
            // Создаем аватар пользователя
            const avatarColor = getAvatarColor(username);
            const canvas = document.createElement('canvas');
            canvas.width = 45;
            canvas.height = 45;
            const ctx = canvas.getContext('2d');
            
            ctx.fillStyle = avatarColor;
            ctx.fillRect(0, 0, 45, 45);
            
            ctx.fillStyle = '#FFFFFF';
            ctx.font = 'bold 16px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            const initials = username.substring(0, 2).toUpperCase();
            ctx.fillText(initials, 22.5, 22.5);
            
            const avatarUrl = canvas.toDataURL();
            
            dropItem.innerHTML = `
                <div class="drop-avatar">
                    <img src="${avatarUrl}" alt="${username}">
                </div>
                <div class="drop-info">
                    <div class="drop-user">
                        <span>${username}</span>
                        <span>${time}</span>
                    </div>
                    <div class="drop-item-name">${item.name}</div>
                    <div class="drop-value">${item.value} <i class="fas fa-coins"></i></div>
                </div>
            `;
            
            // Случайная задержка для анимации
            const delay = Math.random() * 5;
            dropItem.style.animationDelay = `${delay}s`;
            
            dropsContainer.appendChild(dropItem);
            
            // Ограничиваем количество записей
            const drops = dropsContainer.querySelectorAll('.drop-item');
            if (drops.length > 10) {
                drops[0].remove();
            }
        }

        // Добавление в историю выпадений
        function addToRecentDrops(item) {
            const drop = {
                user: currentUser,
                item: item,
                time: "Только что"
            };
            
            gameState.recentDrops.unshift(drop);
            if (gameState.recentDrops.length > 20) {
                gameState.recentDrops.pop();
            }
        }

        // Отправка сообщения в поддержку
        function sendSupportMessage() {
            const username = chatUsername.value.trim() || "Гость";
            const message = chatMessage.value.trim();
            
            if (!message) {
                alert('Введите ваш вопрос');
                return;
            }
            
            // Добавляем сообщение в чат
            const messageElement = document.createElement('div');
            messageElement.className = 'chat-message user';
            messageElement.innerHTML = `<strong>${username}:</strong> ${message}`;
            chatBody.appendChild(messageElement);
            
            // Сохраняем сообщение для админ-панели
            const supportMessage = {
                username: username,
                message: message,
                time: new Date().toLocaleTimeString()
            };
            
            gameState.supportMessages.unshift(supportMessage);
            if (gameState.supportMessages.length > 10) {
                gameState.supportMessages.pop();
            }
            
            // Обновляем админ-панель если открыта
            updateAdminSupportMessages();
            
            // Очищаем поле ввода
            chatMessage.value = '';
            
            // Автоответ поддержки
            setTimeout(() => {
                const responses = [
                    "Спасибо за ваше сообщение! Мы рассмотрим ваш вопрос в ближайшее время.",
                    "Ваш вопрос принят в обработку. Ожидайте ответа в течение 24 часов.",
                    "Мы получили ваше сообщение. Наши специалисты уже работают над решением вашей проблемы.",
                    "Благодарим за обращение! Мы свяжемся с вами в ближайшее время."
                ];
                
                const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                
                const responseElement = document.createElement('div');
                responseElement.className = 'chat-message support';
                responseElement.innerHTML = `<strong>Поддержка:</strong> ${randomResponse}`;
                chatBody.appendChild(responseElement);
                
                // Прокрутка вниз
                chatBody.scrollTop = chatBody.scrollHeight;
            }, 1000);
            
            // Прокрутка вниз
            chatBody.scrollTop = chatBody.scrollHeight;
        }

        // Обновление сообщений поддержки в админ-панели
        function updateAdminSupportMessages() {
            if (!adminSupportMessages) return;
            
            let messagesText = '';
            gameState.supportMessages.forEach(msg => {
                messagesText += `[${msg.time}] ${msg.username}: ${msg.message}\n`;
            });
            
            adminSupportMessages.value = messagesText || "Нет новых сообщений";
        }

        // Получение цвета для аватара
        function getAvatarColor(username) {
            const colors = ['#FF6B6B', '#4ECDC4', '#FFD166', '#06D6A0', '#118AB2', '#EF476F'];
            const index = username.length % colors.length;
            return colors[index];
        }

        // Проверка пароля админ-панели
        function checkAdminPassword() {
            if (adminPasswordInput.value === systemSettings.adminPassword) {
                adminContent.style.display = 'block';
                
                // Заполняем поля текущими значениями
                if (currentUser && users[currentUser]) {
                    adminBalanceInput.value = users[currentUser].balance;
                }
                adminCase1PriceInput.value = casesData[1].price;
                adminCase2PriceInput.value = casesData[2].price;
                adminCase1ChanceInput.value = casesData[1].legendaryChance;
                adminCase2ChanceInput.value = casesData[2].legendaryChance;
                
                // Обновляем сообщения поддержки
                updateAdminSupportMessages();
            } else {
                alert('Неверный пароль!');
            }
        }

        // Сохранение настроек админ-панели
        function saveAdminSettings() {
            // Обновляем настройки
            if (currentUser && users[currentUser]) {
                users[currentUser].balance = parseInt(adminBalanceInput.value);
            }
            
            // Обновляем цены кейсов
            casesData[1].price = parseInt(adminCase1PriceInput.value);
            casesData[2].price = parseInt(adminCase2PriceInput.value);
            
            // Обновляем шансы для кейсов
            casesData[1].legendaryChance = parseFloat(adminCase1ChanceInput.value);
            casesData[2].legendaryChance = parseFloat(adminCase2ChanceInput.value);
            
            // Обновляем отображение цен на кейсах
            document.querySelectorAll('.case-price-value').forEach((span, index) => {
                span.textContent = casesData[index + 1].price.toLocaleString();
            });
            
            // Обновляем отображение
            updateUserDisplay();
            
            // Закрываем админ-панель
            adminModal.style.display = 'none';
            
            alert('Настройки успешно сохранены!');
        }

        // Получение названия редкости
        function getRarityName(rarity) {
            const names = {
                'common': 'Обычный',
                'uncommon': 'Необычный',
                'rare': 'Редкий',
                'mythical': 'Мифический',
                'legendary': 'Легендарный',
                'ancient': 'Древний'
            };
            return names[rarity] || rarity;
        }

        // Запуск инициализации после загрузки страницы
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
